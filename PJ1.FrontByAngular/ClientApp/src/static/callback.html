<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <title>Callback</title>
    <link rel="icon"
          type="image/x-icon"
          href="favicon.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/oidc-client/1.10.0/oidc-client.min.js"
            type="application/javascript"></script>
</head>

<body>
<script>
    let Oidc = window.Oidc;

    let config = {
        userStore: new Oidc.WebStorageStateStore(
            {store: window.localStorage}),
        loadUserInfo: true,
        response_mode: "query"
    };

    // if ((Oidc && Oidc.Log && Oidc.Log.logger)) {
    //     Oidc.Log.logger = console;
    // }
    // let isPopupCallback = JSON.parse(window.localStorage.getItem('ngoidc:isPopupCallback'));
    //
    // if (isPopupCallback) {
    //     new Oidc.UserManager(config).signinPopupCallback();
    // } else {
        new Oidc.UserManager(config).signinRedirectCallback().then(user => {
            console.log("User from collback:  ",user);
            window.location.href = 'https://localhost:10003';
        })
        .catch(function (error) {
            console.log(error);
        });
    // }
</script>
<script src="callback.js"></script>
</body>

</html>